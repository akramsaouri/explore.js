{"version":3,"sources":["script.js"],"names":[],"mappings":"AAAA,EAAE,QAAF,EAAY,KAAZ,CAAkB,MAAM;AACpB,KAAC,YAAY;AACT,mBAAW,GAAX,E;AACH,KAFD;;;AAKA,MAAE,QAAF,EAAY,EAAZ,CAAe,OAAf,EAAwB,OAAxB,EAAiC,MAAM;AACnC,YAAI,MAAM,EAAE,MAAM,MAAR,EAAgB,IAAhB,EAAV,C;AACA,mBAAW,GAAX;AACH,KAHD;;AAKA,MAAE,OAAF,EAAW,KAAX,CAAiB,MAAM;AACnB,YAAI,UAAU,EAAE,UAAF,EAAc,IAAd,EAAd,C;AACA,UAAE,GAAF,CAAM,eAAN,EAAuB,EAAC,OAAD,EAAvB,EAAkC,WAAlC;AACH,KAHD;;AAKA,MAAE,SAAF,EAAa,KAAb,CAAmB,MAAM;AACrB,YAAI,MAAM,EAAE,SAAF,EAAa,GAAb,EAAV;AACA,eAAO,GAAP;AACH,KAHD;AAIH,CApBD;;;;;;AA2BA,SAAS,UAAT,CAAoB,MAAM,EAA1B,EAA8B;AAC1B,MAAE,GAAF,CAAM,eAAN,EAAuB,EAAC,GAAD,EAAvB,EAA8B,WAA9B;AACH;;;;;;AAMD,SAAS,WAAT,CAAqB,OAAO,EAA5B,EAAgC;AAC5B,QAAI,QAAQ,KAAK,KAAL,IAAc,EAA1B;AAAA,QACI,UAAU,KAAK,OAAL,IAAgB,EAD9B;AAAA,QAEI,aAAa,EAAE,QAAF,CAFjB;AAGA,eAAW,KAAX;AACA,UAAM,OAAN,CAAe,IAAD,IAAU;AACpB,YAAI,MAAO,iCAA+B,IAAK,YAA/C;AACA,mBAAW,MAAX,CAAkB,GAAlB;AACH,KAHD;AAIA,MAAE,UAAF,EAAc,IAAd,CAAmB,OAAnB;AACH;;;;;;AAMD,SAAS,MAAT,CAAgB,MAAM,EAAtB,EAA0B;AACtB,QAAI,QAAQ,EAAE,WAAF,CAAZ;AACA,UAAM,IAAN,CAAW,CAAC,KAAD,EAAQ,GAAR,KAAgB;AACtB,UAAE,GAAF,EAAO,IAAP,GAAc,OAAd,CAAsB,GAAtB,MAA+B,CAAC,CAAjC,GAAsC,EAAE,GAAF,EAAO,IAAP,EAAtC,GAAsD,EAAE,GAAF,EAAO,IAAP,EAAtD;AACH,KAFD;AAGH","file":"script-compiled.js","sourcesContent":["$(document).ready(() => {\r\n    (function () {\r\n        fetchFiles('.'); // fetch file of current dir // todo : avoid magic strs\r\n    })();\r\n\r\n    // get sub files\r\n    $(document).on('click', '.file', () => {\r\n        let cwd = $(event.target).text(); // get file basename\r\n        fetchFiles(cwd);\r\n    });\r\n\r\n    $('#back').click(() => {\r\n        let dirname = $('#dirname').text(); // go back in the dir tree\r\n        $.get('/explore/scan', {dirname}, renderFiles);\r\n    });\r\n\r\n    $('#search').keyup(() => {\r\n        var key = $('#search').val();\r\n        search(key);\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * fetch files of the current directory\r\n * @param cwd\r\n */\r\nfunction fetchFiles(cwd = '') {\r\n    $.get('/explore/scan', {cwd}, renderFiles);\r\n}\r\n\r\n/**\r\n * render fetched files to the view\r\n * @param data : files + resolved dirname\r\n */\r\nfunction renderFiles(data = {}) {\r\n    let files = data.files || [],\r\n        dirname = data.dirname || '',\r\n        $container = $('#files');\r\n    $container.empty();\r\n    files.forEach((file) => {\r\n        let str = `<li><a href=\"#\" class=\"file\">${file}</a></li>`;\r\n        $container.append(str);\r\n    });\r\n    $('#dirname').text(dirname);\r\n}\r\n\r\n/**\r\n * Search file by key\r\n * @param key\r\n */\r\nfunction search(key = '') {\r\n    let files = $('#files li');\r\n    files.each((index, elm) => {\r\n        ($(elm).text().indexOf(key) !== -1) ? $(elm).show() : $(elm).hide();\r\n    })\r\n}"]}