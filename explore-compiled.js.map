{"version":3,"sources":["explore.js"],"names":[],"mappings":"AAAA,IAAI,KAAK,QAAQ,IAAR,CAAT;AAAA,IACI,OAAO,QAAQ,MAAR,CADX;;AAGA,OAAO,OAAP,GAAiB;;;;;AAKb,SAAK,GAAL,EAAU,GAAV,EAAe;;AAEX,YAAI,MAAO,IAAI,KAAJ,CAAU,OAAX,GAAsB,KAAK,IAAL,CAAU,IAAI,KAAJ,CAAU,OAApB,EAA6B,IAA7B,CAAtB,GAA2D,IAAI,KAAJ,CAAU,GAA/E;;AAEA,YAAI,QAAQ,GAAG,WAAH,CAAe,GAAf,EAAoB,GAApB,CAAyB,IAAD,IAAU,KAAK,OAAL,CAAa,GAAb,EAAkB,IAAlB,CAAlC,CAAZ;;AAEA,kBAAU,KAAK,OAAL,CAAa,MAAM,CAAN,CAAb,CAAV;;AAEA,YAAI,IAAJ,CAAS,EAAC,KAAD,EAAQ,OAAR,EAAT;AACH,KAdY;;;;;;AAoBb,WAAO,GAAP,EAAY,GAAZ,EAAgB;AACZ,YAAI,OAAO,IAAI,KAAJ,CAAU,IAAV,IAAkB,EAA7B;;AAEA,YAAI,KAAK,OAAL,CAAa,IAAb,EAAmB,MAAnB,GAA4B,CAAhC,EAAmC;AAC/B,eAAG,MAAH,CAAU,IAAV;AACH;AACJ;AA1BY,CAAjB","file":"explore-compiled.js","sourcesContent":["var fs = require('fs'),\r\n    path = require('path');\r\n\r\nmodule.exports = {\r\n\r\n    /**\r\n     * Scan the current directory, fetch his sub dirs and resolve the path to each one of them\r\n     */\r\n    scan(req, res) {\r\n        // navigate forward or back in the tree\r\n        var cwd = (req.query.dirname) ? path.join(req.query.dirname, '..') : req.query.cwd;\r\n        // get all files and resolve their absolute path\r\n        var files = fs.readdirSync(cwd).map((file) => path.resolve(cwd, file));\r\n        // get the dirname\r\n        dirname = path.dirname(files[0]);\r\n        // finally send the data to the front end\r\n        res.send({files, dirname});\r\n    },\r\n    /**\r\n     * Delete a file\r\n     * @param req\r\n     * @param res\r\n     */\r\n    unlink(req, res){\r\n        var file = req.query.file || '';\r\n        // only delete if it's a file\r\n        if (path.extname(file).length > 0) {\r\n            fs.unlink(file);\r\n        }\r\n    }\r\n};\r\n"]}